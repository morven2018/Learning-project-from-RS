(()=>{"use strict";var e={d:(t,l)=>{for(var o in l)e.o(l,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:l[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{B:()=>o,h:()=>r});const l=document.querySelector("body");function o(e,t){const l=Array(t).fill([]);for(let o=0;o<t;o+=1)l[o]=Array.from(e[o].split(""));return l}function r(e){console.log("render"),e.forEach((e=>{const t=e.size,r=e.template;l.append(document.createElement("p"));const n=o(r,t);console.log(1,n);const c=document.createElement("div");c.className="field",l.append(c);const i=document.createElement("div");i.className="field-extra",c.append(i);const b=document.createElement("div");b.className="field__attempt",i.append(b),b.setAttribute("style",`grid-template-columns: repeat(${t}, 20px);`);const p=document.createElement("div");p.className="field__additional",c.append(p);const u=document.createElement("div");u.className="field__attempt",p.append(u),u.setAttribute("style",`grid-template-rows: repeat(${t},  21px);`);const m=document.createElement("div");m.className="game-field",p.append(m),m.setAttribute("style",`grid-template-columns: repeat(${t},  20px);`);const f=s(n,t,!0),_=s(n,t,!1);a(f,b,!0),a(_,u,!1),console.log(2,f),console.log(3,_),function(e,t,l){for(let o=0;o<t;o+=1)for(let r=0;r<t;r+=1){const s=document.createElement("div");e[o][r],s.classList.add("game-field__cell"),s.classList.add("game-field__cell_unknown"),l.append(s),d(o,r,s,t)}}(n,t,m)}))}function s(e,t,l=!0){const o=Array(t);if(l)for(let l=0;l<t;l+=1){let r=[],s=0;for(let o=0;o<t;o+=1)"1"===e[o][l]?(s+=1,o+1===t&&r.push(s)):(s>0&&r.push(s),s=0);o[l]=r}else for(let l=0;l<t;l+=1){let r=[],s=0;for(let o=0;o<t;o+=1)"1"===e[l][o]?(s+=1,o+1===t&&r.push(s)):(s>0&&r.push(s),s=0);o[l]=r}return o}function d(e,t,l,o){t%5==0&&0!=t&&l.setAttribute("style","border-left: none"),e%5==0&&0!=e&&l.setAttribute("style","border-top: none"),e%5!=4&&e!==o-1||l.setAttribute("style","border-bottom: 2px solid black"),t%5==4&&(l.setAttribute("style","border-right: 2px solid black"),e===o-1&&l.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black")),t===o-1&&(l.setAttribute("style","border-right: 2px solid black"),e===o-1&&l.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),e%5==4&&e!=o-1&&l.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),e%5==0&&0!=e&&l.setAttribute("style","border-top: none;  border-right: 2px solid black")),0===t&&(l.setAttribute("style","border-left: 2px solid black"),e%5==0&&0!==e&&l.setAttribute("style","border-top: none; border-left: 2px solid black"),e%5==4&&0!=e&&l.setAttribute("style","border-bottom: 2px solid black; border-left: 2px solid black "),e===o-1&&l.setAttribute("style","border-bottom: 2px solid black;  border-left: 2px solid black;")),0===e&&(l.setAttribute("style","border-top: 2px solid black"),0===t&&l.setAttribute("style","border-top: 2px solid black; border-left: 2px solid black; "),t===o-1&&l.setAttribute("style","border-top: 2px solid black; border-right: 2px solid black; "),0!==t&&t%5==0&&l.setAttribute("style","border-top: 2px solid black;  border-left: none"),t!==o-1&&t%5==4&&l.setAttribute("style","border-top: 2px solid black;  border-right: 2px solid black")),e===o-1&&t%5==0&&0!=t&&l.setAttribute("style","border-left: none;  border-bottom: 2px solid black"),e%5==4&&t%5==4&&e!==o-1&&t!==o-1&&l.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),t%5==0&&e%5==0&&0!==e&&0!==t&&l.setAttribute("style","border-left: none; border-top:none"),t%5==0&&e%5==4&&e!=o-1&&0!=t&&l.setAttribute("style","border-left: none;  border-bottom: 2px solid black"),t%5==4&&e%5==0&&0!==e&&t!==o-1&&l.setAttribute("style","border-top: none; border-right: 2px solid black")}function a(e,t,l=!0){const o=l?"field__attempt__top-attempt":"field__attempt__left-attempt",r=l?"field__attempt__top-attempt__cell":"field__attempt__left-attempt__cell",s=function(e){let t=0;return e.forEach((e=>t=t<e.length?e.length:t)),t}(e),d=l?`height: ${20*s+5*(s-1)}px`:`width: ${20*s+5*(s-1)}px`;e.forEach(((s,a)=>{const n=document.createElement("div");if(n.className=o,t.append(n),n.setAttribute("style",d),0===a&&l&&n.setAttribute("style","border-left: 2px solid black;"),0!==a||l||n.setAttribute("style","border-top: 2px solid black"),l&&a%5==4&&n.setAttribute("style","border-right: 2px solid black;"),l&&a%5==0&&0!=a&&n.setAttribute("style","border-left: none"),l||a%5!=0||0==a||n.setAttribute("style","border-top: none; padding-top: 4px;"),l&&a+1===e.length&&n.setAttribute("style","border-right: 2px solid black;"),l||a%5!=4||n.setAttribute("style","border-bottom: 2px solid black;"),a+1!==e.length||l||n.setAttribute("style"," border-bottom: 2px solid black;"),s.length)s.forEach((e=>{const t=document.createElement("div");t.className=r,t.textContent=e,n.append(t)}));else{const e=document.createElement("div");e.className=r,e.textContent="0",n.append(e)}}))}function n(e){const l=(0,t.getTemplates)()[2].template,r=c(e),s=o(l,e);return r.every(((e,t)=>e.every(((e,l)=>"-1"===e||e===s[t][l]))))}function c(e){const t=document.querySelectorAll(".game-field__cell"),l=Array(e);for(let o=0;o<e;o+=1){l[o]=[];for(let r=0;r<e;r+=1)t[o*e+r].classList.contains("game-field__cell_checked")&&l[o].push("1"),t[o*e+r].classList.contains("game-field__cell_crossed")&&l[o].push("0"),t[o*e+r].classList.contains("game-field__cell_unknown")&&l[o].push("-1")}return l}const i={Easy:5,Medium:10,Hard:15};let b="Easy";const p=document.querySelector("body");let u;function m(e){console.log("clear"),["game-field__cell_unknown","game-field__cell_checked","game-field__cell_crossed"].forEach((t=>{e.classList.contains(t)&&e.classList.remove(t)}))}window.onload=function(e,t="Easy"){p.classList.add("start-page"),console.log("1"),fetch("../dist/materials/data/nonogramm.json").then((e=>e.json())).then((e=>{u=e,r(u),console.log("3"),console.log(u)})),console.log("2"),console.log(u)},p.addEventListener("click",(e=>{"game-field__cell"===e.target.classList[0]&&(e.target.classList.contains("game-field__cell_checked")?(m(e.target),e.target.classList.add("game-field__cell_unknown")):(m(e.target),e.target.classList.add("game-field__cell_checked")),n(i[b])&&function(e){const l=(0,t.getTemplates)()[2].template,r=c(e),s=o(l,e);return r.every(((e,t)=>e.every(((e,l)=>"0"===("-1"===e&&s[t][l])||e===s[t][l]))))}(i[b])?console.log("You win!"):n(i[b])||console.log("Make error"))})),p.addEventListener("contextmenu",(e=>{"game-field__cell"===e.target.classList[0]&&(e.target.classList.contains("game-field__cell_crossed")?(m(e.target),e.target.classList.add("game-field__cell_unknown")):(m(e.target),e.target.classList.add("game-field__cell_crossed")),n(i[b])||console.log("Make error cross"),e.preventDefault())}))})();