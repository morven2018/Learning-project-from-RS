(()=>{"use strict";var e={d:(t,l)=>{for(var o in l)e.o(l,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:l[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{B:()=>o,h:()=>s});const l=document.querySelector("body");function o(e,t){const l=Array(t).fill([]);for(let o=0;o<t;o+=1)l[o]=Array.from(e[o].split(""));return l}function s(e){console.log("render"),e.forEach((e=>{const t=e.size,s=e.template;l.append(document.createElement("p"));const c=o(s,t);console.log(1,c);const d=document.createElement("div");d.className="field",l.append(d);const i=document.createElement("div");i.className="field-extra",d.append(i);const n=document.createElement("div");n.className="field__attempt",i.append(n),n.setAttribute("style",`grid-template-columns: repeat(${t}, 20px);`);const p=document.createElement("div");p.className="field__additional",d.append(p);const b=document.createElement("div");b.className="field__attempt",p.append(b),b.setAttribute("style",`grid-template-rows: repeat(${t}, 21px);`);const m=document.createElement("div");m.className="game-field",p.append(m),m.setAttribute("style",`grid-template-columns: repeat(${t}, 20px);`);const u=r(c,t,!0),_=r(c,t,!1);a(u,n,!0),a(_,b,!1),console.log(2,u),console.log(3,_),function(e,t,l){for(let o=0;o<t;o+=1)for(let s=0;s<t;s+=1){const r=document.createElement("div");e[o][s],r.classList.add("game-field__cell"),l.append(r),o%5==4&&r.setAttribute("style","border-bottom: 1px solid black"),o===t-1&&r.setAttribute("style","border-bottom: 2px solid black"),s%5==4&&(r.setAttribute("style","border-right: 1px solid black"),o===t-1&&r.setAttribute("style","border-bottom: 2px solid black;  border-right: 1px solid black")),s===t-1&&(r.setAttribute("style","border-right: 2px solid black"),o===t-1&&r.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),o%5==4&&o!=t-1&&r.setAttribute("style","border-bottom: 1px solid black;  border-right: 2px solid black")),0===s&&(r.setAttribute("style","border-left: 2px solid black"),o===t-1&&r.setAttribute("style","border-bottom: 2px solid black;  border-left: 2px solid black;"),o%5==4&&o!=t-1&&r.setAttribute("style","border-bottom: 1px solid black;  border-left: 2px solid black")),0===o&&(r.setAttribute("style","border-top: 2px solid black"),0===s&&r.setAttribute("style","border-top: 2px solid black; border-left: 2px solid black; "),s===t-1&&r.setAttribute("style","border-top: 2px solid black; border-right: 2px solid black; "),s!==t-1&&s%5==4&&r.setAttribute("style","border-top: 2px solid black;  border-right: 1px solid black")),o%5==4&&s%5==4&&o!==t-1&&s!==t-1&&r.setAttribute("style","border-bottom: 1px solid black;  border-right: 1px solid black")}}(c,t,m)}))}function r(e,t,l=!0){const o=Array(t);if(l)for(let l=0;l<t;l+=1){let s=[],r=0;for(let o=0;o<t;o+=1)"1"===e[o][l]?(r+=1,o+1===t&&s.push(r)):(r>0&&s.push(r),r=0);o[l]=s}else for(let l=0;l<t;l+=1){let s=[],r=0;for(let o=0;o<t;o+=1)"1"===e[l][o]?(r+=1,o+1===t&&s.push(r)):(r>0&&s.push(r),r=0);o[l]=s}return o}function a(e,t,l=!0){const o=l?"field__attempt__top-attempt":"field__attempt__left-attempt",s=l?"field__attempt__top-attempt__cell":"field__attempt__left-attempt__cell",r=function(e){let t=0;return e.forEach((e=>t=t<e.length?e.length:t)),t}(e),a=l?`height: ${20*r+5*(r-1)}px`:`width: ${20*r+5*(r-1)}px`;e.forEach(((r,c)=>{const d=document.createElement("div");if(d.className=o,t.append(d),d.setAttribute("style",a),0===c&&l&&d.setAttribute("style","border-left: 2px solid black"),0!==c||l||d.setAttribute("style","border-top: 2px solid black"),l&&c%5==4&&d.setAttribute("style","border-right: 1px solid black; width:20px"),l&&c+1===e.length&&d.setAttribute("style","border-right: 2px solid black; width:20px"),l||c%5!=4||d.setAttribute("style","border-bottom: 1px solid black;"),c+1!==e.length||l||d.setAttribute("style"," border-bottom: 2px solid black; height:21px"),r.length)r.forEach((e=>{const t=document.createElement("div");t.className=s,t.textContent=e,d.append(t)}));else{const e=document.createElement("div");e.className=s,e.textContent="0",d.append(e)}}))}function c(e){const l=(0,t.getTemplates)()[2].template,s=d(e),r=o(l,e);return s.every(((e,t)=>e.every(((e,l)=>"-1"===e||e===r[t][l]))))}function d(e){const t=document.querySelectorAll(".game-field__cell"),l=Array(e);for(let o=0;o<e;o+=1){l[o]=[];for(let s=0;s<e;s+=1)t[o*e+s].classList.contains("game-field__cell_checked")&&l[o].push("1"),t[o*e+s].classList.contains("game-field__cell_crossed")&&l[o].push("0"),t[o*e+s].classList.contains("game-field__cell_unknown")&&l[o].push("-1")}return l}const i={Easy:5,Medium:10,Hard:15};let n="Easy";const p=document.querySelector("body");let b;function m(e){console.log("clear"),["game-field__cell_unknown","game-field__cell_checked","game-field__cell_crossed"].forEach((t=>{e.classList.contains(t)&&e.classList.remove(t)}))}window.onload=function(e,t="Easy"){p.classList.add("start-page"),console.log("1"),fetch("../dist/materials/data/nonogramm.json").then((e=>e.json())).then((e=>{b=e,s(b),console.log("3"),console.log(b)})),console.log("2"),console.log(b)},p.addEventListener("click",(e=>{"game-field__cell"===e.target.classList[0]&&(e.target.classList.contains("game-field__cell_checked")?(m(e.target),e.target.classList.add("game-field__cell_unknown")):(m(e.target),e.target.classList.add("game-field__cell_checked")),c(i[n])&&function(e){const l=(0,t.getTemplates)()[2].template,s=d(e),r=o(l,e);return s.every(((e,t)=>e.every(((e,l)=>"0"===("-1"===e&&r[t][l])||e===r[t][l]))))}(i[n])?console.log("You win!"):c(i[n])||console.log("Make error"))})),p.addEventListener("contextmenu",(e=>{"game-field__cell"===e.target.classList[0]&&(e.target.classList.contains("game-field__cell_crossed")?(m(e.target),e.target.classList.add("game-field__cell_unknown")):(m(e.target),e.target.classList.add("game-field__cell_crossed")),c(i[n])||console.log("Make error cross"),e.preventDefault())}))})();