(()=>{"use strict";var e={d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{B:()=>s,h:()=>l});const o=document.querySelector("body");function s(e,t){const o=Array(t).fill([]);for(let s=0;s<t;s+=1)o[s]=Array.from(e[s].split(""));return o}function l(e){console.log("render"),e.forEach((e=>{const t=e.size,l=e.template;o.append(document.createElement("p"));const c=s(l,t);console.log(1,c);const d=document.createElement("div");d.className="field",o.append(d);const i=document.createElement("div");i.className="field-extra",d.append(i);const m=document.createElement("div");m.className="field__attempt",i.append(m),m.setAttribute("style",`grid-template-columns: repeat(${t}, 20px);`);const p=document.createElement("div");p.className="field__additional",d.append(p);const b=document.createElement("div");b.className="field__attempt",p.append(b),b.setAttribute("style",`grid-template-rows: repeat(${t},  21px);`);const _=document.createElement("div");_.className="game-field",p.append(_),_.setAttribute("style",`grid-template-columns: repeat(${t},  20px);`);const u=n(c,t,!0),g=n(c,t,!1);r(u,m,!0),r(g,b,!1),console.log(2,u),console.log(3,g),function(e,t,o){for(let s=0;s<t;s+=1)for(let l=0;l<t;l+=1){const n=document.createElement("div");e[s][l],n.classList.add("game-field__cell"),n.classList.add("game-field__cell_unknown"),o.append(n),a(s,l,n,t)}}(c,t,_)}))}function n(e,t,o=!0){const s=Array(t);if(o)for(let o=0;o<t;o+=1){let l=[],n=0;for(let s=0;s<t;s+=1)"1"===e[s][o]?(n+=1,s+1===t&&l.push(n)):(n>0&&l.push(n),n=0);s[o]=l}else for(let o=0;o<t;o+=1){let l=[],n=0;for(let s=0;s<t;s+=1)"1"===e[o][s]?(n+=1,s+1===t&&l.push(n)):(n>0&&l.push(n),n=0);s[o]=l}return s}function a(e,t,o,s){t%5==0&&0!=t&&o.setAttribute("style","border-left: none"),e%5==0&&0!=e&&o.setAttribute("style","border-top: none"),e%5!=4&&e!==s-1||o.setAttribute("style","border-bottom: 2px solid black"),t%5==4&&(o.setAttribute("style","border-right: 2px solid black"),e===s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black")),t===s-1&&(o.setAttribute("style","border-right: 2px solid black"),e===s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),e%5==4&&e!=s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),e%5==0&&0!=e&&o.setAttribute("style","border-top: none;  border-right: 2px solid black")),0===t&&(o.setAttribute("style","border-left: 2px solid black"),e%5==0&&0!==e&&o.setAttribute("style","border-top: none; border-left: 2px solid black"),e%5==4&&0!=e&&o.setAttribute("style","border-bottom: 2px solid black; border-left: 2px solid black "),e===s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-left: 2px solid black;")),0===e&&(o.setAttribute("style","border-top: 2px solid black"),0===t&&o.setAttribute("style","border-top: 2px solid black; border-left: 2px solid black; "),t===s-1&&o.setAttribute("style","border-top: 2px solid black; border-right: 2px solid black; "),0!==t&&t%5==0&&o.setAttribute("style","border-top: 2px solid black;  border-left: none"),t!==s-1&&t%5==4&&o.setAttribute("style","border-top: 2px solid black;  border-right: 2px solid black")),e===s-1&&t%5==0&&0!=t&&o.setAttribute("style","border-left: none;  border-bottom: 2px solid black"),e%5==4&&t%5==4&&e!==s-1&&t!==s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),t%5==0&&e%5==0&&0!==e&&0!==t&&o.setAttribute("style","border-left: none; border-top:none"),t%5==0&&e%5==4&&e!=s-1&&0!=t&&o.setAttribute("style","border-left: none;  border-bottom: 2px solid black"),t%5==4&&e%5==0&&0!==e&&t!==s-1&&o.setAttribute("style","border-top: none; border-right: 2px solid black")}function r(e,t,o=!0){const s=o?"field__attempt__top-attempt":"field__attempt__left-attempt",l=o?"field__attempt__top-attempt__cell":"field__attempt__left-attempt__cell",n=function(e){let t=0;return e.forEach((e=>t=t<e.length?e.length:t)),t}(e),a=o?`height: ${20*n+5*(n-1)}px`:`width: ${20*n+5*(n-1)}px`;e.forEach(((n,r)=>{const c=document.createElement("div");if(c.className=s,t.append(c),c.setAttribute("style",a),0===r&&o&&c.setAttribute("style","border-left: 2px solid black;"),0!==r||o||c.setAttribute("style","border-top: 2px solid black"),o&&r%5==4&&c.setAttribute("style","border-right: 2px solid black;"),o&&r%5==0&&0!=r&&c.setAttribute("style","border-left: none"),o||r%5!=0||0==r||c.setAttribute("style","border-top: none; padding-top: 4px;"),o&&r+1===e.length&&c.setAttribute("style","border-right: 2px solid black;"),o||r%5!=4||c.setAttribute("style","border-bottom: 2px solid black;"),r+1!==e.length||o||c.setAttribute("style"," border-bottom: 2px solid black;"),n.length)n.forEach((e=>{const t=document.createElement("div");t.className=l,t.textContent=e,c.append(t)}));else{const e=document.createElement("div");e.className=l,e.textContent="0",c.append(e)}}))}function c(e){const o=(0,t.getTemplates)()[2].template,l=d(e),n=s(o,e);return l.every(((e,t)=>e.every(((e,o)=>"-1"===e||e===n[t][o]))))}function d(e){const t=document.querySelectorAll(".game-field__cell"),o=Array(e);for(let s=0;s<e;s+=1){o[s]=[];for(let l=0;l<e;l+=1)t[s*e+l].classList.contains("game-field__cell_checked")&&o[s].push("1"),t[s*e+l].classList.contains("game-field__cell_crossed")&&o[s].push("0"),t[s*e+l].classList.contains("game-field__cell_unknown")&&o[s].push("-1")}return o}function i(e,t,o,s=null){const l=document.createElement("button");l.className=t,l.textContent=o,null===s&&e.append(l)}const m={Easy:5,Medium:10,Hard:15};let p="Easy";const b=document.querySelector("body");let _;function u(e){console.log("clear"),["game-field__cell_unknown","game-field__cell_checked","game-field__cell_crossed"].forEach((t=>{e.classList.contains(t)&&e.classList.remove(t)}))}window.onload=function(e,t="Easy"){b.classList.add("start-page"),console.log("1"),fetch("../dist/materials/data/nonogramm.json").then((e=>e.json())).then((e=>{console.log(localStorage),_=e,function(e){const t=document.querySelector("body");let o=Object.keys(localStorage).includes("level")?localStorage.getItem("level"):"Easy";const s=document.createElement("h1");s.className="game-header",s.textContent="Nonograms",t.append(s);const l=document.createElement("div");l.className="start-page-buttons",t.append(l),i(l,"start-page-buttons__random-game","Random game"),i(l,"start-page-buttons__continue-last-game","Continue last game");const n=document.createElement("main");n.classList="main",t.append(n);const a=document.createElement("div");a.classList="nonograms-list",n.append(a);const r=document.createElement("div");r.className="nonograms-list__tabs",a.append(r),function(e,t="Easy"){Object.keys(m).forEach((o=>{const s=document.createElement("div");s.textContent=`${o} (${m[o]}x${m[o]})`;let l=`nonograms-list__tabs__${o.toLowerCase()}`;s.classList.add(l),s.value=o.toLowerCase(),e.append(s),t===o&&s.classList.add("nonograms-list__tabs__active")}))}(r);const c=document.createElement("div");c.className="nonograms-list__cards",a.append(c),e.filter((e=>e.size===m[o])).forEach((e=>function(e,t){const o=document.createElement("div");o.className="card",e.append(o),t.id,o.classList.add("card_done"),e.append(o);const s=document.createElement("h3");s.className="card__header",s.textContent=t.name,o.append(s);const l=document.createElement("div");l.className="cards__content",o.append(l);const n=document.createElement("div");n.className="card__preview",s.append(n);const a=document.createElement("div");a.className="card__info",l.append(a);const r=document.createElement("p");r.classList="card__timer";let c=(t.id,t.id,"00:00");r.textContent=`Time: ${c}`,a.append(r),t.id,i(a,"start-page-buttons__another-try","Play again?"),i(a,"start-page-buttons__continue-game","Continue"),t.id}(c,e)));const d=document.createElement("div");d.className="nonograms-list__records",n.append(d),function(e){const t=localStorage.getItem("done-nonograms"),o=document.createElement("h2");if(o.classList="nonograms-list__records__header",e.append(o),o.textContent="Records:",t){const o=JSON.parse(t);(o.length>5?o.slice(-5,-1):o).forEach(((t,o)=>{const s=document.createElement("div");s.className="nonograms-list__records__item",e.append(s);const l=document.createElement("div");l.className="records__item__position",e.append(l),l.textContent=o;const n=document.createElement("div");n.className="records__item__info",e.append(n);const a=document.createElement("h3");a.className="records__item__name",n.append(a),a.textContent=t.name;const r=document.createElement("h3");r.className="records__item__time",n.append(r),r.textContent=t.time;const c=document.createElement("h3");c.className="records__item__size",n.append(c),c.textContent=`${t.size}x${t.size}`}))}else{const t=document.createElement("div");t.className="nonograms-list__records__none",e.append(t),t.textContent="There is no records at time."}}(d)}(_),l(_),console.log("3"),console.log(_)}))},b.addEventListener("click",(e=>{"game-field__cell"===e.target.classList[0]&&(e.target.classList.contains("game-field__cell_checked")?(u(e.target),e.target.classList.add("game-field__cell_unknown")):(u(e.target),e.target.classList.add("game-field__cell_checked")),c(m[p])&&function(e){const o=(0,t.getTemplates)()[2].template,l=d(e),n=s(o,e);return l.every(((e,t)=>e.every(((e,o)=>"0"===("-1"===e&&n[t][o])||e===n[t][o]))))}(m[p])?console.log("You win!"):c(m[p])||console.log("Make error"))})),b.addEventListener("contextmenu",(e=>{"game-field__cell"===e.target.classList[0]&&(e.target.classList.contains("game-field__cell_crossed")?(u(e.target),e.target.classList.add("game-field__cell_unknown")):(u(e.target),e.target.classList.add("game-field__cell_crossed")),c(m[p])||console.log("Make error cross"),e.preventDefault())}))})();