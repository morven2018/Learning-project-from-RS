(()=>{"use strict";var e={d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function o(e,t){const o=Array(t).fill([]);for(let s=0;s<t;s+=1)o[s]=Array.from(e[s].split(""));return o}function s(e,t=document.querySelector("body")){const s=e.size,c=o(e.template,s);console.log(1,c);const d=document.createElement("div");d.className="field",t.append(d);const i=document.createElement("div");i.className="field-extra",d.append(i);const m=document.createElement("div");i.append(m);const _=document.createElement("div");_.className="field__attempt",i.append(_),_.setAttribute("style",`grid-template-columns: repeat(${s}, 20px);`);const u=document.createElement("div");u.className="field__additional",d.append(u);const p=document.createElement("div");p.className="field__attempt",u.append(p),p.setAttribute("style",`grid-template-rows: repeat(${s},  21px);`);const b=document.createElement("div");b.className="game-field",u.append(b),b.setAttribute("style",`grid-template-columns: repeat(${s},  20px);`);const g=a(c,s,!0),f=a(c,s,!1),y=n(f);m.setAttribute("style",`min-width: ${20*y+5*(y-1)}px`),r(g,_,!0),r(f,p,!1),console.log(2,g),console.log(3,f),function(e,t,o){for(let s=0;s<t;s+=1)for(let a=0;a<t;a+=1){const n=document.createElement("div");e[s][a],n.classList.add("game-field__cell"),n.classList.add("game-field__cell_unknown"),o.append(n),l(s,a,n,t)}}(c,s,b)}function a(e,t,o=!0){const s=Array(t);if(o)for(let o=0;o<t;o+=1){let a=[],l=0;for(let s=0;s<t;s+=1)"1"===e[s][o]?(l+=1,s+1===t&&a.push(l)):(l>0&&a.push(l),l=0);s[o]=a}else for(let o=0;o<t;o+=1){let a=[],l=0;for(let s=0;s<t;s+=1)"1"===e[o][s]?(l+=1,s+1===t&&a.push(l)):(l>0&&a.push(l),l=0);s[o]=a}return s}function l(e,t,o,s){t%5==0&&0!=t&&o.setAttribute("style","border-left: none"),e%5==0&&0!=e&&o.setAttribute("style","border-top: none"),e%5!=4&&e!==s-1||o.setAttribute("style","border-bottom: 2px solid black"),t%5==4&&(o.setAttribute("style","border-right: 2px solid black"),e===s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black")),t===s-1&&(o.setAttribute("style","border-right: 2px solid black"),e===s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),e%5==4&&e!=s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),e%5==0&&0!=e&&o.setAttribute("style","border-top: none;  border-right: 2px solid black")),0===t&&(o.setAttribute("style","border-left: 2px solid black"),e%5==0&&0!==e&&o.setAttribute("style","border-top: none; border-left: 2px solid black"),e%5==4&&0!=e&&o.setAttribute("style","border-bottom: 2px solid black; border-left: 2px solid black "),e===s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-left: 2px solid black;")),0===e&&(o.setAttribute("style","border-top: 2px solid black"),0===t&&o.setAttribute("style","border-top: 2px solid black; border-left: 2px solid black; "),t===s-1&&o.setAttribute("style","border-top: 2px solid black; border-right: 2px solid black; "),0!==t&&t%5==0&&o.setAttribute("style","border-top: 2px solid black;  border-left: none"),t!==s-1&&t%5==4&&o.setAttribute("style","border-top: 2px solid black;  border-right: 2px solid black")),e===s-1&&t%5==0&&0!=t&&o.setAttribute("style","border-left: none;  border-bottom: 2px solid black"),e%5==4&&t%5==4&&e!==s-1&&t!==s-1&&o.setAttribute("style","border-bottom: 2px solid black;  border-right: 2px solid black"),t%5==0&&e%5==0&&0!==e&&0!==t&&o.setAttribute("style","border-left: none; border-top:none"),t%5==0&&e%5==4&&e!=s-1&&0!=t&&o.setAttribute("style","border-left: none;  border-bottom: 2px solid black"),t%5==4&&e%5==0&&0!==e&&t!==s-1&&o.setAttribute("style","border-top: none; border-right: 2px solid black")}function n(e){let t=0;return e.forEach((e=>t=t<e.length?e.length:t)),t}function r(e,t,o=!0){const s=o?"field__attempt__top-attempt":"field__attempt__left-attempt",a=o?"field__attempt__top-attempt__cell":"field__attempt__left-attempt__cell",l=n(e),r=o?`height: ${20*l+5*(l-1)}px`:`width: ${20*l+5*(l-1)}px`;e.forEach(((l,n)=>{const c=document.createElement("div");if(c.className=s,t.append(c),c.setAttribute("style",r),0===n&&o&&c.setAttribute("style","border-left: 2px solid black;"),0!==n||o||c.setAttribute("style","border-top: 2px solid black"),o&&n%5==4&&c.setAttribute("style","border-right: 2px solid black;"),o&&n%5==0&&0!=n&&c.setAttribute("style","border-left: none"),o||n%5!=0||0==n||c.setAttribute("style","border-top: none; padding-top: 4px;"),o&&n+1===e.length&&c.setAttribute("style","border-right: 2px solid black;"),o||n%5!=4||c.setAttribute("style","border-bottom: 2px solid black;"),n+1!==e.length||o||c.setAttribute("style"," border-bottom: 2px solid black;"),l.length)l.forEach((e=>{const t=document.createElement("div");t.className=a,t.textContent=e,c.append(t)}));else{const e=document.createElement("div");e.className=a,e.textContent="0",c.append(e)}}))}function c(e){const s=(0,t.getTemplates)()[2].template,a=d(e),l=o(s,e);return a.every(((e,t)=>e.every(((e,o)=>"-1"===e||e===l[t][o]))))}function d(e){const t=document.querySelectorAll(".game-field__cell"),o=Array(e);for(let s=0;s<e;s+=1){o[s]=[];for(let a=0;a<e;a+=1)t[s*e+a].classList.contains("game-field__cell_checked")&&o[s].push("1"),t[s*e+a].classList.contains("game-field__cell_crossed")&&o[s].push("0"),t[s*e+a].classList.contains("game-field__cell_unknown")&&o[s].push("-1")}return o}function i(e=null){if(e)localStorage.setItem("level",e);else{const e=document.querySelector(".nonograms-list__tabs__active");localStorage.setItem("level",e.value)}}function m(e,t,o,s=!1,a=null){const l=document.createElement("button");l.className=t,l.textContent=o,s?e.prepend(l):e.append(l),a&&(l.value=a)}e.r(t),e.d(t,{B:()=>o,h:()=>s});const _={Easy:5,Medium:10,Hard:15};function u(e){const t=document.querySelector("body");let o=Object.keys(localStorage).includes("level")?localStorage.getItem("level"):"Easy";const s=document.createElement("h1");s.className="game-header",s.textContent="Nonograms",t.append(s);const a=document.createElement("div");a.className="start-page-buttons",t.append(a),m(a,"start-page-buttons__random-game","Random game"),m(a,"start-page-buttons__continue-last-game","Continue last game");const l=document.createElement("main");l.classList="main",t.append(l);const n=document.createElement("div");n.classList="nonograms-list",l.append(n);const r=document.createElement("div");r.className="nonograms-list__tabs",n.append(r),function(e,t="Easy"){Object.keys(_).forEach((o=>{const s=document.createElement("div");s.textContent=`${o} (${_[o]}x${_[o]})`;let a=`nonograms-list__tabs__${o.toLowerCase()}`;s.classList.add(a),s.value=o,e.append(s),t===o&&s.classList.add("nonograms-list__tabs__active")}))}(r);const c=document.createElement("div");c.className="nonograms-list__cards",n.append(c),e.filter((e=>e.size===_[o])).forEach((e=>b(c,e)));const d=document.createElement("div");d.className="nonograms-list__records",l.append(d),function(e){const t=localStorage.getItem("nonograms"),o=document.createElement("h2");if(o.classList="nonograms-list__records__header",e.append(o),o.textContent="Records:",t){const o=JSON.parse(t);(o.length>5?o.slice(-5,-1):o).forEach(((t,o)=>{const s=document.createElement("div");s.className="nonograms-list__records__item",e.append(s);const a=document.createElement("div");a.className="records__item__position",e.append(a),a.textContent=o;const l=document.createElement("div");l.className="records__item__info",e.append(l);const n=document.createElement("h3");n.className="records__item__name",l.append(n),n.textContent=t.name;const r=document.createElement("h3");r.className="records__item__time",l.append(r),r.textContent=t.time;const c=document.createElement("h3");c.className="records__item__size",l.append(c),c.textContent=`${t.size}x${t.size}`}))}else{const t=document.createElement("div");t.className="nonograms-list__records__none",e.append(t),t.textContent="There is no records at time."}}(d)}function p(e,t){console.log(e);const o=document.querySelector(".nonograms-list__cards");o.innerHTML="",t.filter((t=>t.size===_[e])).forEach((e=>b(o,e)))}function b(e,t){const o=document.createElement("div");o.className="card",e.append(o),t.id,o.classList.add("card_done"),e.append(o);const s=document.createElement("h3");s.className="card__header",s.textContent=t.name,o.append(s);const a=document.createElement("div");a.className="cards__content",o.append(a);const l=document.createElement("div");l.className="card__preview",s.append(l);const n=document.createElement("div");n.className="card__info",a.append(n);const r=document.createElement("p");r.classList="card__timer";let c=(t.id,t.id,"00:00");r.textContent=`Time: ${c}`,n.append(r),t.id,m(n,"start-page-buttons__another-try","Play again?",!1,t.id),console.log(t.id),m(n,"start-page-buttons__continue-game","Continue"),t.id}let g="Easy";const f=document.querySelector("body");let y;function v(e){console.log("clear"),["game-field__cell_unknown","game-field__cell_checked","game-field__cell_crossed"].forEach((t=>{e.classList.contains(t)&&e.classList.remove(t)}))}window.onload=function(e,t="Easy"){f.classList.add("start-page"),console.log("1"),fetch("../dist/materials/data/nonogramm.json").then((e=>e.json())).then((e=>{y=e,void 0===localStorage.level?console.log("wtf"):i("Easy"),u(y)}))},f.addEventListener("click",(e=>{if("game-field__cell"===e.target.classList[0]&&(e.target.classList.contains("game-field__cell_checked")?(v(e.target),e.target.classList.add("game-field__cell_unknown")):(v(e.target),e.target.classList.add("game-field__cell_checked")),c(_[g])&&function(e){const s=(0,t.getTemplates)()[2].template,a=d(e),l=o(s,e);return a.every(((e,t)=>e.every(((e,o)=>"0"===("-1"===e&&l[t][o])||e===l[t][o]))))}(_[g])?console.log("You win!"):c(_[g])||console.log("Make error")),"start-page-buttons__another-try"!==e.target.classList[0]&&"start-page-buttons__new-game"!==e.target.classList[0]||(console.log(y,e.target.value,y[e.target.value-1]),i(),function(){const e=document.querySelector(".main");e&&e.remove();const t=document.querySelector(".start-page-buttons");t&&t.remove()}(),function(e){const t=document.querySelector("body"),o=document.createElement("div");o.className="header-of-game",t.append(o),function(e){const t=document.createElement("button");t.className="btn-return-to-start-page",t.textContent="<",t.setAttribute("aria-label","Return to chose the nonogram"),e.append(t)}(o);const a=document.createElement("h2");a.className="game-header__name",a.textContent=e.name,o.append(a);const l=document.createElement("div");l.className="game-area",t.append(l),s(e,l);const n=document.createElement("div");n.className="game-header__data",l.append(n);const r=document.createElement("div");r.className="game-timer",r.classList.add("game-timer__inactive"),r.textContent="Timer: 00:00:00",n.append(r);const c=document.createElement("div");c.className="bth-list",n.append(c),m(c,"start-page-buttons__save-game","Save game"),m(c,"start-page-buttons__reset-game","Reset"),m(c,"start-page-buttons__game-solution","Solution")}(y[e.target.value-1])),"nonograms-list__tabs__easy"===e.target.classList[0]){const e=document.querySelector(".nonograms-list__tabs__easy");e.classList.add("nonograms-list__tabs__active"),document.querySelector(`.nonograms-list__tabs__${localStorage.level.toLowerCase()}`).classList.remove("nonograms-list__tabs__active"),localStorage.level=e.value,p(localStorage.level,y)}if("nonograms-list__tabs__medium"===e.target.classList[0]){const e=document.querySelector(".nonograms-list__tabs__medium");e.classList.add("nonograms-list__tabs__active"),document.querySelector(`.nonograms-list__tabs__${localStorage.level.toLowerCase()}`).classList.remove("nonograms-list__tabs__active"),localStorage.level=e.value,p(localStorage.level,y)}if("nonograms-list__tabs__hard"===e.target.classList[0]){const e=document.querySelector(".nonograms-list__tabs__hard");e.classList.add("nonograms-list__tabs__active"),document.querySelector(`.nonograms-list__tabs__${localStorage.level.toLowerCase()}`).classList.remove("nonograms-list__tabs__active"),localStorage.level=e.value,p(localStorage.level,y)}"btn-return-to-start-page"===e.target.classList[0]&&(function(){const e=document.querySelector(".header-of-game");e&&e.remove();const t=document.querySelector(".game-area");t&&t.remove();const o=document.querySelector(".game-header");o&&o.remove()}(),u(y))})),f.addEventListener("contextmenu",(e=>{"game-field__cell"===e.target.classList[0]&&(e.target.classList.contains("game-field__cell_crossed")?(v(e.target),e.target.classList.add("game-field__cell_unknown")):(v(e.target),e.target.classList.add("game-field__cell_crossed")),c(_[g])||console.log("Make error cross"),e.preventDefault())}))})();